<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}BTP Manager{% endblock %}</title>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text></svg>">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
        
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
        
        {% block stylesheets %}
        <style>
            :root {
                --primary-color: #212528;
                --secondary-color: #5EADF9;
                --accent-color: #457EF7;
                --neutral-color: #7F7F7F;
                --danger-color: #CB4549;
            }
            
            body {
                font-family: 'Inter', sans-serif;
                background-color: #f8f9fa;
            }
            
            .navbar-brand {
                font-weight: 700;
                font-size: 1.5rem;
            }
            
            .nav-link {
                font-weight: 500;
                margin: 0 0.5rem;
                transition: all 0.2s;
            }
            
            .nav-link:hover {
                opacity: 0.8;
            }
            
            .btn {
                font-weight: 500;
                border-radius: 8px;
                transition: all 0.2s;
            }
            
            .btn-primary {
                background-color: var(--secondary-color);
                border-color: var(--secondary-color);
            }
            
            .btn-primary:hover {
                background-color: var(--accent-color);
                border-color: var(--accent-color);
            }
            
            .card {
                border: none;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                border-radius: 12px;
                transition: transform 0.2s, box-shadow 0.2s;
            }
            
            .card:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            }
            
            .badge {
                font-weight: 500;
            }
            
            .table {
                border-radius: 8px;
                overflow: hidden;
            }
            
            .alert {
                border-radius: 8px;
                border: none;
            }
            
            .form-control, .form-select {
                border-radius: 8px;
                border: 1px solid #e0e0e0;
                transition: border-color 0.2s, box-shadow 0.2s;
            }
            
            .form-control:focus, .form-select:focus {
                border-color: var(--secondary-color);
                box-shadow: 0 0 0 0.2rem rgba(94, 173, 249, 0.25);
            }
        </style>
        {% endblock %}
    </head>
    <body>
        {% if app.user %}
            <nav class="navbar navbar-expand-lg" style="background-color: var(--primary-color);">
                <div class="container">
                    <a class="navbar-brand text-white" href="{{ path('app_home') }}">
                        <i class="fas fa-hard-hat me-2"></i>BTP Manager
                    </a>
                    
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav me-auto">
                            {% if app.user.isAdmin %}
                                <li class="nav-item">
                                    <a class="nav-link text-white" href="{{ path('app_equipe_index') }}">
                                        <i class="fas fa-users me-1"></i>Équipes
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link text-white" href="{{ path('app_chantier_index') }}">
                                        <i class="fas fa-building me-1"></i>Chantiers
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link text-white" href="{{ path('app_affectation_index') }}">
                                        <i class="fas fa-clipboard-list me-1"></i>Affectations
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link text-white" href="{{ path('app_user_index') }}">
                                        <i class="fas fa-user-hard-hat me-1"></i>Ouvrier
                                    </a>
                                </li>
                            {% else %}
                                <li class="nav-item">
                                    <a class="nav-link text-white" href="{{ path('app_chantier_index') }}">
                                        <i class="fas fa-building me-1"></i>Mes Chantiers
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link text-white" href="{{ path('app_affectation_index') }}">
                                        <i class="fas fa-clipboard-list me-1"></i>Mes Affectations
                                    </a>
                                </li>
                            {% endif %}
                        </ul>
                        
                        <ul class="navbar-nav">
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown">
                                    <i class="fas fa-user me-1"></i>{{ app.user.nom }}
                                    {% if app.user.isAdmin %}
                                        <span class="badge bg-danger ms-1">Admin</span>
                                    {% endif %}
                                </a>
                                <ul class="dropdown-menu">
                                    <li><h6 class="dropdown-header">{{ app.user.email }}</h6></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li>
                                        <a class="dropdown-item" href="{{ path('app_logout') }}">
                                            <i class="fas fa-sign-out-alt me-2"></i>Déconnexion
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        {% endif %}

        <main>
            {% block body %}{% endblock %}
        </main>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        
        {% block javascripts %}
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const alerts = document.querySelectorAll('.alert-dismissible');
                alerts.forEach(function(alert) {
                    setTimeout(function() {
                        const bsAlert = new bootstrap.Alert(alert);
                        bsAlert.close();
                    }, 5000);
                });
            });
        </script>
        {% endblock %}
    </body>
</html>